{"remainingRequest":"/Users/kisukouyou/Project/vue-amplify/node_modules/babel-loader/lib/index.js!/Users/kisukouyou/Project/vue-amplify/node_modules/eslint-loader/index.js??ref--13-0!/Users/kisukouyou/Project/vue-amplify/src/router/index.js","dependencies":[{"path":"/Users/kisukouyou/Project/vue-amplify/src/router/index.js","mtime":1622472603605},{"path":"/Users/kisukouyou/Project/vue-amplify/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kisukouyou/Project/vue-amplify/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/kisukouyou/Project/vue-amplify/node_modules/eslint-loader/index.js","mtime":1622192647990}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9raXN1a291eW91L1Byb2plY3QvdnVlLWFtcGxpZnkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZS9pbmRleC5qcyI7CmltcG9ydCBBdXRoIGZyb20gIkBhd3MtYW1wbGlmeS9hdXRoIjsKaW1wb3J0IHsgQXV0aFN0YXRlLCBvbkF1dGhVSVN0YXRlQ2hhbmdlIH0gZnJvbSAiQGF3cy1hbXBsaWZ5L3VpLWNvbXBvbmVudHMiOwppbXBvcnQgU2lnbkluIGZyb20gJy4uL3ZpZXdzL3NpZ25Jbi52dWUnOwppbXBvcnQgQWxidW1JbmRleCBmcm9tICcuLi92aWV3cy9hbGJ1bS9pbmRleC52dWUnOwppbXBvcnQgQWxidW1DcmVhdGUgZnJvbSAnLi4vdmlld3MvYWxidW0vY3JlYXRlLnZ1ZSc7CmltcG9ydCBBbGJ1bUVkaXQgZnJvbSAiLi4vdmlld3MvYWxidW0vZWRpdC52dWUiOwppbXBvcnQgQWxidW1TaG93IGZyb20gIi4uL3ZpZXdzL2FsYnVtL3Nob3cudnVlIjsKaW1wb3J0IFBob3RvQ3JlYXRlIGZyb20gIi4uL3ZpZXdzL3Bob3RvL2NyZWF0ZS52dWUiOwpWdWUudXNlKFZ1ZVJvdXRlcik7CnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICIvIiwKICByZWRpcmVjdDogewogICAgbmFtZTogIkFsYnVtSW5kZXgiCiAgfQp9LCB7CiAgcGF0aDogJy9zaWduaW4nLAogIG5hbWU6ICdTaWduSW4nLAogIGNvbXBvbmVudDogU2lnbkluCn0sIHsKICBwYXRoOiAnL2FsYnVtcycsCiAgbmFtZTogQWxidW1JbmRleCwKICBjb21wb25lbnQ6IEFsYnVtSW5kZXgsCiAgbWV0YTogewogICAgcmVxdWlyZUF1dGg6IHRydWUKICB9Cn0sIHsKICBwYXRoOiAnL2FsYnVtcy9jcmVhdGUnLAogIG5hbWU6IEFsYnVtQ3JlYXRlLAogIGNvbXBvbmVudDogQWxidW1DcmVhdGUsCiAgbWV0YTogewogICAgcmVxdWlyZUF1dGg6IHRydWUKICB9Cn0sIHsKICBwYXRoOiAiL2FsYnVtcy86YWxidW1JZC9lZGl0IiwKICBuYW1lOiAiQWxidW1FZGl0IiwKICBjb21wb25lbnQ6IEFsYnVtRWRpdCwKICBwcm9wczogdHJ1ZSwKICBtZXRhOiB7CiAgICByZXF1aXJlQXV0aDogdHJ1ZQogIH0KfSwgewogIHBhdGg6ICIvYWxidW1zLzphbGJ1bUlkIiwKICBuYW1lOiAiQWxidW1TaG93IiwKICBjb21wb25lbnQ6IEFsYnVtU2hvdywKICBwcm9wczogdHJ1ZSwKICBtZXRhOiB7CiAgICByZXF1aXJlQXV0aDogdHJ1ZQogIH0KfSwgewogIHBhdGg6ICIvYWxidW1zLzphbGJ1bUlkL3Bob3RvL2NyZWF0ZSIsCiAgbmFtZTogIlBob3RvQ3JlYXRlIiwKICBjb21wb25lbnQ6IFBob3RvQ3JlYXRlLAogIHByb3BzOiB0cnVlLAogIG1ldGE6IHsKICAgIHJlcXVpcmVBdXRoOiB0cnVlCiAgfQp9XTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIG1vZGU6ICdoaXN0b3J5JywKICAvLyBiYXNlOiBwcm9jZXNzLmVudi5CQVNFX1VSTCwKICByb3V0ZXM6IHJvdXRlcwp9KTsgLy8g44K144Kk44Oz44Kk44Oz5riI44Om44O844K244O85oOF5aCx5Y+W5b6XCgpmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGVkVXNlcigpIHsKICByZXR1cm4gQXV0aC5jdXJyZW50QXV0aGVudGljYXRlZFVzZXIoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICBpZiAoZGF0YSAmJiBkYXRhLnNpZ25JblVzZXJTZXNzaW9uKSB7CiAgICAgIHN0b3JlLmNvbW1pdCgic2V0VXNlciIsIGRhdGEpOwogICAgICByZXR1cm4gZGF0YTsKICAgIH0KICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZSkgewogICAgY29uc29sZS5sb2coZSk7CiAgICBzdG9yZS5jb21taXQoInNldFVzZXIiLCBudWxsKTsKICAgIHJldHVybiBudWxsOwogIH0pOwp9Cgp2YXIgdXNlcjsgLy8g55S76Z2i6YG356e744GZ44KL5bqm44Grcm91dGVyLmJlZm9yZVJlc29sdmXjgpLlrp/ooYwKLy8g55S76Z2i6YG356e744GZ44KL5bqm44GrZ2V0QXV0aGVudGljYXRlZFVzZXIoKeOCkuWun+ihjOOBl+OBpnVzZXLjgrnjg4bjg7zjg4jjgpLmm7TmlrAKCnJvdXRlci5iZWZvcmVSZXNvbHZlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gZ2V0QXV0aGVudGljYXRlZFVzZXIoKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHVzZXIgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgaWYgKCEodG8ubmFtZSA9PT0gIlNpZ25JbiIgJiYgdXNlcikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV4dCh7CiAgICAgICAgICAgICAgbmFtZTogIkFsYnVtSW5kZXgiCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGlmICghKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZC5tZXRhLnJlcXVpcmVBdXRoOwogICAgICAgICAgICB9KSAmJiAhdXNlcikpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV4dCh7CiAgICAgICAgICAgICAgbmFtZTogIlNpZ25JbiIKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpvbkF1dGhVSVN0YXRlQ2hhbmdlKGZ1bmN0aW9uIChhdXRoU3RhdGUsIGF1dGhEYXRhKSB7CiAgaWYgKGF1dGhTdGF0ZSA9PT0gQXV0aFN0YXRlLlNpZ25lZEluICYmIGF1dGhEYXRhKSB7CiAgICByb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICJBbGJ1bUluZGV4IgogICAgfSk7CiAgfQoKICBpZiAoYXV0aFN0YXRlID09PSBBdXRoU3RhdGUuU2lnbmVkT3V0KSB7CiAgICByb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICJTaWduSW4gIgogICAgfSk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/Users/kisukouyou/Project/vue-amplify/src/router/index.js"],"names":["Vue","VueRouter","store","Auth","AuthState","onAuthUIStateChange","SignIn","AlbumIndex","AlbumCreate","AlbumEdit","AlbumShow","PhotoCreate","use","routes","path","redirect","name","component","meta","requireAuth","props","router","mode","getAuthenticatedUser","currentAuthenticatedUser","then","data","signInUserSession","commit","e","console","log","user","beforeResolve","to","from","next","matched","some","record","authState","authData","SignedIn","push","SignedOut"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport store from \"@/store/index.js\";\nimport Auth from \"@aws-amplify/auth\";\nimport { AuthState, onAuthUIStateChange } from \"@aws-amplify/ui-components\";\nimport SignIn from '../views/signIn.vue';\nimport AlbumIndex from '../views/album/index.vue';\nimport AlbumCreate from '../views/album/create.vue';\nimport AlbumEdit from \"../views/album/edit.vue\";\nimport AlbumShow from \"../views/album/show.vue\";\nimport PhotoCreate from \"../views/photo/create.vue\";\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: \"/\",\n    redirect: { name: \"AlbumIndex\" },\n  },\n  {\n    path: '/signin',\n    name: 'SignIn',\n    component: SignIn,\n  },\n  {\n    path: '/albums',\n    name: AlbumIndex,\n    component: AlbumIndex,\n    meta: { requireAuth: true },\n  },\n  {\n    path: '/albums/create',\n    name: AlbumCreate,\n    component: AlbumCreate,\n    meta: { requireAuth: true },\n  },\n  {\n    path: \"/albums/:albumId/edit\",\n    name: \"AlbumEdit\",\n    component: AlbumEdit,\n    props: true,\n    meta: { requireAuth: true },\n  },\n  {\n    path: \"/albums/:albumId\",\n    name: \"AlbumShow\",\n    component: AlbumShow,\n    props: true,\n    meta: { requireAuth: true },\n  },\n  {\n    path: \"/albums/:albumId/photo/create\",\n    name: \"PhotoCreate\",\n    component: PhotoCreate,\n    props: true,\n    meta: { requireAuth: true },\n  },\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  // base: process.env.BASE_URL,\n  routes\n})\n\n// サインイン済ユーザー情報取得\nfunction getAuthenticatedUser() {\n  return Auth.currentAuthenticatedUser()\n    .then((data) => {\n      if (data && data.signInUserSession) {\n        store.commit(\"setUser\", data);\n        return data;\n      }\n    })\n    .catch((e) => {\n      console.log(e);\n      store.commit(\"setUser\", null);\n      return null;\n    });\n}\n\nlet user;\n\n// 画面遷移する度にrouter.beforeResolveを実行\n// 画面遷移する度にgetAuthenticatedUser()を実行してuserステートを更新\nrouter.beforeResolve(async (to, from, next) => {\n  user = await getAuthenticatedUser();\n\n  if (to.name === \"SignIn\" && user) {\n    return next({ name: \"AlbumIndex\" });\n  }\n\n  if (to.matched.some((record) => record.meta.requireAuth) && !user) {\n    return next({ name: \"SignIn\" });\n  }\n\n  return next();\n});\n\nonAuthUIStateChange((authState, authData) => {\n  if (authState === AuthState.SignedIn && authData) {\n    router.push({ name: \"AlbumIndex\" });\n  }\n  if (authState === AuthState.SignedOut) {\n    router.push({ name: \"SignIn \"});\n  }\n});\n\nexport default router\n"]}]}